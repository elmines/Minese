program : optDefs

optDefs : NONE
	| defs

defs : definition
     | definition defs

definition : classDef
           | varDef
           | functionDef


classDef : CLASS IDENTIFIER optExtension OCURLY classBody CCURLY

optExtension : NONE
             | EXTENDS IDENTIFIER

classBody : definition
          | definition classBody



varDef : VAR IDENTIFIER optAssignment SEMICOLON

optAssignment : NONE
              | ASSIGN expression



functionDef : DEFINE IDENTIFIER funcBody

funcBody: OPAREN optParamsList CPAREN block

optParamsList : NONE
              | paramsList

paramsList : VAR IDENTIFIER
           | VAR IDENTIFIER COMMA paramsList



block : OCURLY optStatements CCURLY
      | statement

optStatements : NONE
              | statements

statements : statement
           | statement statements

statement : condBlock
          | whileBlock
          | expression  SEMICOLON
          | definition
          | returnStatement


condStatement : IF condition block |
              : IF condition block ELSE block

whileHeader : WHILE condition block

condition : OPAREN expression CPAREN

returnStatement : RETURN expression SEMICOLON
                | RETURN SEMICOLON




expression : unary
           | unary operator expression
           | unary OPAREN optExprList CPAREN
           | unary OBRACK expression CBRACK

unary: UMINUS unary
     | NOT    unary
     | OPAREN expression CPAREN
     | array
     | anonFunction
     | IDENTIFIER
     | boolean
     | INTEGER
     | STRING

optExprList : NONE
            | exprList

exprList : expression
         | expression COMMA exprList


array : OBRACK exprList CBRACK

anonFunction : LAMBDA funcBody

boolean : TRUE
        | FALSE

operator : PLUS
         | TIMES
         | MINUS
         | DIV
         | MOD
         | LT
         | LTE
	 | NEQ
         | EQ
         | GTE
         | GT
         | ASSIGN
         | DOT
         | AND
         | OR
